{"remainingRequest":"/Users/erin/project/hello-world/testSrc/node_modules/babel-loader/lib/index.js!/Users/erin/project/hello-world/testSrc/node_modules/eslint-loader/index.js??ref--13-0!/Users/erin/project/hello-world/testSrc/src/utils/dialog.js","dependencies":[{"path":"/Users/erin/project/hello-world/testSrc/src/utils/dialog.js","mtime":1611929267684},{"path":"/Users/erin/project/hello-world/testSrc/node_modules/cache-loader/dist/cjs.js","mtime":1611492586366},{"path":"/Users/erin/project/hello-world/testSrc/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/erin/project/hello-world/testSrc/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.regexp.constructor\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport _typeof from \"/Users/erin/project/hello-world/testSrc/node_modules/@babel/runtime/helpers/builtin/es6/typeof\";\n\n/**\n *Author: erin\n *DateTime: 2021/1/23 6:50 下午\n */\nimport Vue from \"vue\";\nvar i = 0,\n    list = {},\n    ct = 0;\nexport default {\n  dialog: {\n    data: []\n  },\n  vue: Vue,\n  open: function open(options, callback) {\n    var _this = this;\n\n    _typeof(options) != \"object\" && (options = {\n      content: options\n    });\n    options.parent = this;\n    var id = 'dialog_' + ++i;\n    options.content = \"<div id=\\\"\".concat(id, \"\\\">\").concat(options.content, \"</div>\");\n    options.id = id;\n\n    if (options.css) {\n      options.css = ('}' + options.css.replace(/[\\n\\r\\t]+/g, '').replace(/{ +/g, '{').replace(/ +}/g, '}')).replace(new RegExp(\"}((?!#\" + id + \"[ {]).*?{)\", \"g\"), \"}#dialog #\" + id + \" $1\").substring(1);\n    }\n\n    console.log(999, options);\n    list[id] = 1;\n    this.dialog.data.push(options);\n    options.index = this.dialog.index = this.dialog.data.length;\n    this.dialog.isToast = this.isToast();\n    options.oldData = Object.assign({}, options.data || {}); //this.dialog.nextTick = this.vue.nextTick;\n\n    this.dialog.nextTick(function () {\n      if (list[id]) options.vue = new Vue({\n        el: '#' + id,\n        data: options.data || {},\n        methods: options.methods || {}\n      });\n      callback && callback(options);\n    });\n    options.type != 'loading' && (options.btns || (ct = setTimeout(function () {\n      _this.close();\n    }, (options.showTime || 2) * 1000)));\n    return this;\n  },\n  loading: function loading(content, data) {\n    return this.open({\n      type: \"loading\",\n      content: content || 'loading',\n      data: data\n    });\n  },\n  toast: function toast(content, showTime) {\n    return this.open({\n      type: \"toast\",\n      content: content || '',\n      showTime: showTime\n    });\n  },\n  error: function error(content, showTime) {\n    return this.open({\n      type: \"error\",\n      content: content || 'error',\n      showTime: showTime\n    });\n  },\n  cancel: function cancel(userFun) {\n    var d = this.getActive();\n\n    if (userFun) {\n      userFun(d);\n    } else {\n      for (var _i in d.oldData) {\n        d.data[_i] = d.oldData[_i];\n      }\n    }\n\n    return this;\n  },\n  cancelAndClose: function cancelAndClose() {\n    this.cancel();\n    this.close();\n  },\n  close: function close(callback) {\n    var d = this.dialog.data.pop();\n    if (!d) return this;\n    clearTimeout(ct);\n    delete list[d.id];\n    delete d.vue;\n    d = null;\n    callback && callback(this.dialog);\n    this.dialog.index = this.dialog.data.length;\n    this.dialog.isToast = this.isToast();\n    return this;\n  },\n  getActive: function getActive() {\n    return this.dialog.data[this.dialog.data.length - 1];\n  },\n  isToast: function isToast() {\n    var act = this.getActive() || {\n      type: \"\"\n    };\n    return !!{\n      toast: 1,\n      error: 1\n    }[act.type];\n  }\n};",{"version":3,"sources":["/Users/erin/project/hello-world/testSrc/src/utils/dialog.js"],"names":["Vue","i","list","ct","dialog","data","vue","open","options","callback","content","parent","id","css","replace","RegExp","substring","console","log","push","index","length","isToast","oldData","Object","assign","nextTick","el","methods","type","btns","setTimeout","close","showTime","loading","toast","error","cancel","userFun","d","getActive","cancelAndClose","pop","clearTimeout","act"],"mappings":"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","sourcesContent":["/**\n *Author: erin\n *DateTime: 2021/1/23 6:50 下午\n */\nimport Vue from \"vue\";\nlet i = 0, list = {}, ct = 0;\nexport default {\n    dialog : {data:[]},\n    vue: Vue,\n    open(options, callback){\n        typeof options != \"object\" && (options = {content:options});\n        options.parent = this;\n        let id = 'dialog_' + ++i;\n        options.content = `<div id=\"${id}\">${options.content}</div>`;\n        options.id = id;\n        if(options.css){\n             options.css = ('}' + options.css.replace(/[\\n\\r\\t]+/g, '').replace(/{ +/g, '{').replace(/ +}/g, '}')).replace(new RegExp(\"}((?!#\" + id +\"[ {]).*?{)\", \"g\"), \"}#dialog #\" + id + \" $1\").substring(1)\n        }\n        console.log(999,options)\n        list[id] = 1;\n        this.dialog.data.push(options);\n\n        options.index = this.dialog.index = this.dialog.data.length;\n        this.dialog.isToast = this.isToast();\n        options.oldData = Object.assign({}, options.data || {});\n        //this.dialog.nextTick = this.vue.nextTick;\n        this.dialog.nextTick(()=>{\n            if(list[id])\n                options.vue = new Vue({\n                    el : '#' + id,\n                    data : options.data || {},\n                    methods : options.methods || {}\n                });\n            callback && callback(options);\n        });\n        options.type != 'loading' && (options.btns || (ct = setTimeout(()=>{\n            this.close();\n        }, (options.showTime || 2) * 1000)));\n        return this;\n    },\n    loading(content, data){\n        return this.open({type:\"loading\", content:content||'loading', data:data});\n    },\n    toast(content, showTime){\n        return this.open({type:\"toast\", content:content||'', showTime:showTime});\n    },\n    error(content,showTime){\n        return this.open({type:\"error\", content:content||'error', showTime:showTime});\n    },\n    cancel(userFun){\n        let d = this.getActive();\n        if(userFun){\n            userFun(d);\n        }else{\n            for(let i in d.oldData){\n                d.data[i] = d.oldData[i];\n            }\n        }\n        return this;\n    },\n    cancelAndClose(){\n        this.cancel();\n        this.close();\n    },\n    close(callback){\n        let d = this.dialog.data.pop();\n        if(!d) return this;\n        clearTimeout(ct);\n        delete list[d.id];\n        delete d.vue;\n        d = null;\n        callback && callback(this.dialog);\n        this.dialog.index = this.dialog.data.length;\n        this.dialog.isToast = this.isToast();\n        return this;\n    },\n    getActive(){\n        return this.dialog.data[this.dialog.data.length - 1];\n    },\n    isToast(){\n        let act = this.getActive() || {type:\"\"};\n        return !!({toast:1,error:1}[act.type]);\n    }\n};\n"]}]}