{"remainingRequest":"/Users/erin/project/hello-world/testSrc/node_modules/babel-loader/lib/index.js!/Users/erin/project/hello-world/testSrc/node_modules/eslint-loader/index.js??ref--13-0!/Users/erin/project/hello-world/testSrc/src/utils/remoteLoad.js","dependencies":[{"path":"/Users/erin/project/hello-world/testSrc/src/utils/remoteLoad.js","mtime":1538490892000},{"path":"/Users/erin/project/hello-world/testSrc/node_modules/cache-loader/dist/cjs.js","mtime":1611492586366},{"path":"/Users/erin/project/hello-world/testSrc/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/erin/project/hello-world/testSrc/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["export default function remoteLoad(url, hasCallback) {\n  return createScript(url);\n  /**\n   * 创建script\n   * @param url\n   * @returns {Promise}\n   */\n\n  function createScript(url) {\n    var scriptElement = document.createElement('script');\n    document.body.appendChild(scriptElement);\n    var promise = new Promise(function (resolve, reject) {\n      scriptElement.addEventListener('load', function (e) {\n        removeScript(scriptElement);\n\n        if (!hasCallback) {\n          resolve(e);\n        }\n      }, false);\n      scriptElement.addEventListener('error', function (e) {\n        removeScript(scriptElement);\n        reject(e);\n      }, false);\n\n      if (hasCallback) {\n        window.____callback____ = function () {\n          resolve();\n          window.____callback____ = null;\n        };\n      }\n    });\n\n    if (hasCallback) {\n      url += '&callback=____callback____';\n    }\n\n    scriptElement.src = url;\n    return promise;\n  }\n  /**\n   * 移除script标签\n   * @param scriptElement script dom\n   */\n\n\n  function removeScript(scriptElement) {\n    document.body.removeChild(scriptElement);\n  }\n}",{"version":3,"sources":["/Users/erin/project/hello-world/testSrc/src/utils/remoteLoad.js"],"names":["remoteLoad","url","hasCallback","createScript","scriptElement","document","createElement","body","appendChild","promise","Promise","resolve","reject","addEventListener","removeScript","e","window","____callback____","src","removeChild"],"mappings":"AAAA,eAAe,SAASA,UAAT,CAAqBC,GAArB,EAA0BC,WAA1B,EAAuC;AACpD,SAAOC,aAAaF,GAAb,CAAP;AACA;;;;;;AAKA,WAASE,YAAT,CAAuBF,GAAvB,EAA4B;AAC1B,QAAIG,gBAAgBC,SAASC,aAAT,CAAuB,QAAvB,CAApB;AACAD,aAASE,IAAT,CAAcC,WAAd,CAA0BJ,aAA1B;AACA,QAAIK,UAAU,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AAC7CR,oBAAcS,gBAAd,CAA+B,MAA/B,EAAuC,aAAK;AAC1CC,qBAAaV,aAAb;;AACA,YAAI,CAACF,WAAL,EAAkB;AAChBS,kBAAQI,CAAR;AACD;AACF,OALD,EAKG,KALH;AAOAX,oBAAcS,gBAAd,CAA+B,OAA/B,EAAwC,aAAK;AAC3CC,qBAAaV,aAAb;AACAQ,eAAOG,CAAP;AACD,OAHD,EAGG,KAHH;;AAKA,UAAIb,WAAJ,EAAiB;AACfc,eAAOC,gBAAP,GAA0B,YAAY;AACpCN;AACAK,iBAAOC,gBAAP,GAA0B,IAA1B;AACD,SAHD;AAID;AACF,KAnBa,CAAd;;AAqBA,QAAIf,WAAJ,EAAiB;AACfD,aAAO,4BAAP;AACD;;AAEDG,kBAAcc,GAAd,GAAoBjB,GAApB;AAEA,WAAOQ,OAAP;AACD;AAED;;;;;;AAIA,WAASK,YAAT,CAAuBV,aAAvB,EAAsC;AACpCC,aAASE,IAAT,CAAcY,WAAd,CAA0Bf,aAA1B;AACD;AACF","sourcesContent":["export default function remoteLoad (url, hasCallback) {\n  return createScript(url)\n  /**\n   * 创建script\n   * @param url\n   * @returns {Promise}\n   */\n  function createScript (url) {\n    let scriptElement = document.createElement('script')\n    document.body.appendChild(scriptElement)\n    let promise = new Promise((resolve, reject) => {\n      scriptElement.addEventListener('load', e => {\n        removeScript(scriptElement)\n        if (!hasCallback) {\n          resolve(e)\n        }\n      }, false)\n\n      scriptElement.addEventListener('error', e => {\n        removeScript(scriptElement)\n        reject(e)\n      }, false)\n\n      if (hasCallback) {\n        window.____callback____ = function () {\n          resolve()\n          window.____callback____ = null\n        }\n      }\n    })\n\n    if (hasCallback) {\n      url += '&callback=____callback____'\n    }\n\n    scriptElement.src = url\n\n    return promise\n  }\n\n  /**\n   * 移除script标签\n   * @param scriptElement script dom\n   */\n  function removeScript (scriptElement) {\n    document.body.removeChild(scriptElement)\n  }\n}\n"]}]}